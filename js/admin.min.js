!function(a){var b=function(b){var c=this,d=a(b),e={};e.variantId=d.find("#pronamic_gateway_id"),this.updateConfigFields=function(){var b=e.variantId.find("option:selected").data("pronamic-pay-settings");d.find(".extra-settings").hide(),a.isArray(b)&&a.each(b,function(a,b){d.find(".setting-"+b).show()})},this.updateFields=function(){c.updateConfigFields()},c.updateFields(),e.variantId.change(c.updateConfigFields)};a.fn.pronamicPayGatewayConfigEditor=function(){return this.each(function(){var c=a(this);if(!c.data("pronamic-pay-gateway-config-editor")){var d=new b(this);c.data("pronamic-pay-gateway-config-editor",d)}})};var c=function(b){var c=this,d=a(b),e={};e.amountMethod=d.find('select[name="_pronamic_payment_form_amount_method"]'),this.updateAmountsVisibility=function(){var a=e.amountMethod.val();"choices_only"===a||"choices_and_input"===a?d.find('input[name="_pronamic_payment_form_amount_choices[]"]').closest("div").show():d.find('input[name="_pronamic_payment_form_amount_choices[]"]').closest("div").hide()},this.maybeAddAmountChoice=function(){e.amountChoices=d.find('input[name="_pronamic_payment_form_amount_choices[]"]');var a=e.amountChoices.filter(function(){return""===this.value});if(0===a.length){var b=e.amountChoices.last().closest("div"),c=b.clone(),f="_pronamic_payment_form_amount_choice_"+e.amountChoices.length;c.find("input").attr("id",f).val(""),c.find("label").attr("for",f),b.after(c)}},c.updateAmountsVisibility(),e.amountMethod.change(c.updateAmountsVisibility),d.on("keyup",'input[name="_pronamic_payment_form_amount_choices[]"]',function(){c.maybeAddAmountChoice()})};a.fn.pronamicPayFormOptions=function(){return this.each(function(){var b=a(this);if(!b.data("pronamic-pay-forms-options")){var d=new c(this);b.data("pronamic-pay-form-options",d)}})},a(document).ready(function(){a("#pronamic-pay-gateway-config-editor").pronamicPayGatewayConfigEditor(),a("#pronamic_payment_form_options").pronamicPayFormOptions()})}(jQuery);