@import 'compass/css3';

@import '../fonts/variables';

@import 'admin/variables';
@import 'admin/forms';
@import 'admin/dashboard-widget-payments';
@import 'admin/chart';
@import 'admin/tables';
@import 'admin/tabs';
@import 'admin/tip';
@import 'admin/code';
@import 'admin/settings';

.pronamic-pay-status-table {
	margin-top: 2em;

	tbody {
		th {
			&:first-child {
				width: 20%;
			}
		}
	}
}

// Subscriptions table
// @see https://github.com/WordPress/WordPress/blob/3.9/wp-admin/css/common.css#L431
.pronamic-pay-subscriptions-table {
	border-spacing: 0;

	clear: both;

	margin: 0;

	width: 100%;

	thead {
		th {
			border-bottom: 1px solid #e1e1e1;
		}
	}

	th,
	td {
		padding: 8px 10px;
	}

	th {
		text-align: left;
	}
}

// Status
// @see https://github.com/woothemes/woocommerce/blob/v2.2.3/assets/css/admin.less#L1122-L1164
.widefat {
	.column-pronamic_payment_status,
	.column-pronamic_subscription_status,
	.column-pronamic_payment_subscription {
		width: 1em;
	}
}

.pronamic-pay-status {
	display: block;

	position: relative;

	text-indent: -9999px;

	width: 1em;
	height: 1em;

	&::after {
		content: $ppi-status-processing;

		display: block;

		font-family: 'Pronamic Pay Icons';

		position: absolute;
		top: 0;
		left: 0;

		speak: none;

		text-indent: 0;

		width: 100%;
		height: 100%;
	}
}

.pronamic-pay-status-pending {
	&::after {
		color: #ffba00;
		content: $ppi-status-pending;
	}
}

.pronamic-pay-status-cancelled {
	&::after {
		color: #a00;
		content: $ppi-status-cancelled;
	}
}

.pronamic-pay-status-processing {
	&::after {
		color: #73a724;
		content: $ppi-status-processing;
	}
}

.pronamic-pay-status-completed {
	&::after {
		color: #2ea2cc;
		content: $ppi-status-completed;
	}
}

.pronamic-pay-status-refunded {
	&::after {
		color: #999;
		content: $ppi-status-refunded;
	}
}

.pronamic-pay-status-failed {
	&::after {
		color: #d0c21f;
		content: $ppi-status-failed;
	}
}

.pronamic-pay-status-on-hold {
	&::after {
		color: #999;
		content: $ppi-status-on-hold;
	}
}

// Recurring status
.pronamic-pay-recurring {
	display: block;

	position: relative;

	text-indent: -9999px;

	width: 1em;
	height: 1em;

	&::after {
		color: #999;

		content: $ppi-recurring;

		display: block;

		font-family: 'Pronamic Pay Icons';

		position: absolute;
		top: 0;
		left: 0;

		speak: none;

		text-indent: 0;

		width: 100%;
		height: 100%;
	}
}

.pronamic-pay-recurring-first {
	&::after {
		color: #2ea2cc;
	}
}

// Gateway config postbox
#pronamic_gateway_config {
	option.deprecated {
		color: #aaa;
	}

	.gateway-config-section-header {
		h4 {
			margin: 0;
		}

		p {
			margin: 0 0 1em;

			&:last-child {
				margin-bottom: 0;
			}
		}
	}
}

// Gateway test postbox
#pronamic_gateway_test {
	.inside > label,
	.inside div label {
		display: block;
	}

	.pronamic-pay-test-payment-method td label {
		display: none;
	}

	.pronamic-pay-test-payment-method {
		display: none;
	}
}

// Payment log postbox
#pronamic_payment_log.postbox .inside {
	margin: 0;
	padding: 0;
}

#pronamic_payment_log .comments-box {
	border: 0 none;
}

// Post type payment
body.post-type-pronamic_payment,
body.post-type-pronamic_pay_subscr {
	#post-body-content {
		margin-bottom: 0;
	}
}

// Input shortcode
.pronamic-pay-shortcode-input {
	width: 100%;
}

// Meta box update
#pronamic_payment_update .inside,
#pronamic_subscription_update .inside {
	margin: 0;
	padding: 0;
}

.pronamic-pay-inner {
	margin: 6px 0 0;
	padding: 0 12px 12px;
}

.pronamic-pay-major-actions {
	background: #f5f5f5;

	border-top: 1px solid #ddd;

	padding: 10px;
}

.pronamic-pay-action {
	float: right;

	text-align: right;
}

// Documentation
.pronamic-pay-table {
	tr.deprecated {
		td,
		a {
			color: #aaa;
		}
	}
}

// Error
.pronamic-pay-error {
	background: $gray-very-light-white;

	border-left: 4px solid #a00;

	box-shadow: 0 1px 1px rgba(#000, .125);

	clear: both;

	margin: 15px 0;
	padding: 1em 1em 1em 2em;

	position: relative;
}

div.extra-settings {
	display: none;
}

div.pronamic-pay-tab,
div.extra-settings {
	border: 1px solid $pronamic-border-color;
	border-top: 0;

	clear: both;

	> div {
		font-style: italic;

		padding: 20px 10px;
	}

	.gateway-config-section-header h4,
	.show-provider {
		display: none;
	}

	.form-table {
		margin-top: 0;

		tr.even {
			background: $pronamic-striped-background-color;
		}

		th {
			padding-left: 10px;
		}

		td {
			p {
				line-height: inherit;

				&:first-child {
					margin-top: 5px;
				}
			}
		}
	}

	.input-file-wrapper {
		overflow: hidden;

		position: relative;

		input[type='file'] {
			cursor: pointer;

			font-size: 50px;

			position: absolute;
			top: 0;
			right: 0;

			height: 100%;
		}
	}

	p + input.button,
	.pk-cert-ok input.button,
	input.large-text.code + input.button {
		margin-top: 10px;

		& + div.button {
			margin-top: 10px;
		}
	}

	span.description {
		line-height: 1.9;
	}
}

#pk-cert-fields-toggle {
	display: inline-block;

	margin: 1em;
}

#_pronamic_gateway_country + span.description {
	display: inline;

	margin-left: 10px;
}

// Hide download buttons for new configuration
body.post-new-php div.extra-settings {
	input {
		[name='download_private_key'],
		[name='download_private_certificate'] {
			display: none;
		}
	}

	.pk-cert-error > span {
		display: none;
	}
}

#pronamic-pay-gateway-description {
	font-size: .9em;

	margin-top: 10px;
}

#pronamic-pay-gateway-config-editor {
	.dashicons {
		vertical-align: text-bottom;

		&.dashicons-yes {
			color: $green;
		}

		&.dashicons-no {
			color: $red;
		}

		&.dashicons-warning {
			color: $orange;
		}
	}
}
